<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <title>Padeiro - Fornadas</title>
    <link rel="stylesheet" href="padeiro.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>

<body>
    <div class="linha-btn">
        <button class="btn-voltar" onclick="history.back()">
            <span class="material-icons icon">arrow_back</span>
        </button>

        <button id="btn-nova-fornada" class="btn-nova">
            <span class="material-icons icon">add</span>
        </button>
    </div>

    <h1>Padeiro - Fornadas</h1>

    <div id="fornadas" class="grid"></div>

    <script src="padeiro.js"></script>
</body>

</html>

<script>
    document.querySelectorAll(".btn-excluir").forEach(btn => {
        btn.addEventListener("click", async () => {
            const id = btn.getAttribute("data-id");

            if (confirm(`Deseja realmente excluir a fornada #${id}?`)) {
                try {
                    const response = await fetch(`http://localhost:8080/fornada/excluir/${id}`, {
                        method: "DELETE"
                    });

                    if (response.ok) {
                        alert("Fornada excluída com sucesso!");
                        btn.closest(".card").remove(); // remove o card da tela
                    } else {
                        alert("Erro ao excluir a fornada.");
                    }
                } catch (error) {
                    console.error(error);
                    alert("Erro de conexão com o servidor.");
                }
            }
        });
    });
</script>